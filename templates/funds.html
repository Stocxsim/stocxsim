{% extends "base.html" %}
{% block title %}Funds | Stocxsim{% endblock %}

{% block css %}
<link rel="stylesheet" href="/static/css/funds.css">
{% endblock %}

{% block content %}
<div class="container funds-page-container">
    <div class="row g-4">

        <!-- LEFT -->
        <div class="col-md-7">
            <div class="card p-4 text-center">
                <h6 class="text-muted">Stocks balance</h6>
                <h2 id="stocksBalance" class="text-heading">&#8377;{{ user.balance }}</h2>
                <hr>

                <div class="d-flex justify-content-between">
                    <span>Cash</span>
                    <strong id="cashBalance" class="text-heading">&#8377;{{ user.balance }}</strong>
                </div>
            </div>

            <div class="card mt-3 p-3 d-flex justify-content-between flex-row align-items-center" id="fundsTransactionsCard"
                onclick="showTransaction()">
                <span>All transactions</span>
                <i class="bi bi-chevron-right"></i>
            </div>
        </div>

        <!-- RIGHT -->
        <div class="col-md-5">
            <div class="card p-4">
                <div class="d-flex justify-content-between funds-tabs">
                    <span id="addTab" class="fund-tab active" onclick="switchTab('add')">
                        Add money
                    </span>
                    <span id="withdrawTab" class="fund-tab" onclick="switchTab('withdraw')">
                        Withdraw
                    </span>

                </div>
                <hr>
                <input id="amountInput" type="number"
                    class="form-control text-center fs-1 fw-bold border-0 amount-input" value="0" min="0">
                <div class="d-flex justify-content-center gap-3 my-4">
                    <button class="btn btn-light rounded-pill" onclick="addAmount(1000)">
                        +&#8377;1,000
                    </button>
                    <button class="btn btn-light rounded-pill" onclick="addAmount(5000)">
                        +&#8377;5,000
                    </button>
                    <button class="btn btn-light rounded-pill" onclick="addAmount(10000)">
                        +&#8377;10,000
                    </button>
                </div>



                <div id="infoBox" class="alert alert-light text-center">
                    Enter amount to add
                </div>
                <button id="actionBtn" class="btn btn-funds-action w-100 mt-4">
                    Add money
                </button>
            </div>
        </div>

    </div>
</div>
<div id="orderBanner" class="order-banner"></div>




{% endblock %}

{% block breakdown_modal %}
<div class="indicator-modal-overlay" id="breakdownOverlay">
    <div class="indicator-modal">
        <div class="indicator-modal-header">
            <h3 class="indicator-modal-title">Charges</h3>
            <button class="indicator-modal-close" id="breakdownCloseBtn" aria-label="Close">
                <i class="bi bi-x-lg"></i>
            </button>
        </div>
        <div class="indicator-modal-body">
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">Exchange Transaction Charges</span>
                <span id="brk_exchange">&#8377;0.00</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">Ipft Charges</span>
                <span id="brk_ipft">&#8377;0.00</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">GST</span>
                <span id="brk_gst">&#8377;0.00</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">SEBI Turnover Charges</span>
                <span id="brk_sebi">&#8377;0.00</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">Securities Transaction Tax (STT)</span>
                <span id="brk_stt">&#8377;0.00</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">DP Charges</span>
                <span id="brk_dp">&#8377;0.00</span>
            </div>
            <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">Stamp Duty</span>
                <span id="brk_stamp">&#8377;0.00</span>
            </div>

            <hr class="my-3">

            <div class="mt-3">
                <div class="d-flex justify-content-between mb-1">
                    <span>Gross Price</span> <span id="brk_gross_summary"></span>
                </div>
                <div class="d-flex justify-content-between mb-1">
                    <span>Total Charges</span> <span id="brk_total_charges" class="text-danger"></span>
                </div>
                <hr class="my-2">
                <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">Net Price</span>
                    <span id="breakdownNet" class="fw-bold fs-6 text-dark"></span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block js %}
<script src="/static/js/funds.js"></script>
{% endblock %}
