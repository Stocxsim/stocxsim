<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>TradingView Technical Indicator Gauge</title>
     <link rel="stylesheet" href="try.css">
</head>

<body>
     <div class="gauge-container">
          <svg class="gauge-svg" viewBox="0 0 320 180" preserveAspectRatio="xMidYMid meet">
               <!-- Gradient definitions for smooth color zones -->
               <defs>
                    <linearGradient id="arcGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                         <stop offset="0%" style="stop-color:#c0392b;stop-opacity:1" />
                         <stop offset="20%" style="stop-color:#e74c3c;stop-opacity:1" />
                         <stop offset="40%" style="stop-color:#f39c12;stop-opacity:1" />
                         <stop offset="50%" style="stop-color:#7f8c8d;stop-opacity:1" />
                         <stop offset="60%" style="stop-color:#27ae60;stop-opacity:1" />
                         <stop offset="80%" style="stop-color:#2ecc71;stop-opacity:1" />
                         <stop offset="100%" style="stop-color:#16a085;stop-opacity:1" />
                    </linearGradient>
               </defs>

               <!-- Semi-circular arc (180° from 180° to 0°) -->
               <path class="gauge-arc" d="M 20 160 A 140 140 0 0 1 300 160" fill="none" stroke="url(#arcGradient)"
                    stroke-width="3" stroke-linecap="round" />

               <!-- Needle group (rotates around center) -->
               <g class="needle-group">
                    <!-- Needle line -->
                    <line class="needle-line" x1="160" y1="160" x2="160" y2="40" stroke="black" stroke-width="2"
                         stroke-linecap="round" />

                    <!-- Center dot -->
                    <circle class="center-dot" cx="160" cy="160" r="5" fill="black" />
               </g>
          </svg>

          <div class="label-container">
               <div class="label-text" id="label">Neutral</div>
          </div>
     </div>

     <!-- Control buttons for testing -->
     <div class="button-container">
          <button class="btn btn-strong-sell" onclick="setGauge(-80)">Strong Sell</button>
          <button class="btn btn-sell" onclick="setGauge(-40)">Sell</button>
          <button class="btn btn-neutral" onclick="setGauge(0)">Neutral</button>
          <button class="btn btn-buy" onclick="setGauge(45)">Buy</button>
          <button class="btn btn-strong-buy" onclick="setGauge(85)">Strong Buy</button>
     </div>

     <script>
          /**
           * Sets the gauge to a specific value with smooth animation.
           * @param {number} value - Range from -100 to +100
           */
          function setGauge(value) {
               // Clamp value to range [-100, 100]
               value = Math.max(-100, Math.min(100, value));

               // Convert linear value to rotation angle
               // -100 → -90°, 0 → 0°, +100 → +90°
               const angle = (value / 100) * 90;

               // Apply rotation to needle group
               const needleGroup = document.querySelector('.needle-group');
               needleGroup.style.transform = `rotate(${angle}deg)`;
               needleGroup.style.transformOrigin = '160px 160px';

               // Update label text and color based on value
               updateLabel(value);
          }

          /**
           * Updates the label text and color based on gauge value.
           * @param {number} value - Range from -100 to +100
           */
          function updateLabel(value) {
               const label = document.getElementById('label');
               let text, colorClass;

               if (value <= -60) {
                    text = 'Strong Sell';
                    colorClass = 'color-strong-sell';
               } else if (value <= -20) {
                    text = 'Sell';
                    colorClass = 'color-sell';
               } else if (value < 20) {
                    text = 'Neutral';
                    colorClass = 'color-neutral';
               } else if (value < 60) {
                    text = 'Buy';
                    colorClass = 'color-buy';
               } else {
                    text = 'Strong Buy';
                    colorClass = 'color-strong-buy';
               }

               label.textContent = text;
               label.className = `label-text ${colorClass}`;
          }

          // Initialize gauge at neutral position
          setGauge(0);
     </script>
</body>

</html>